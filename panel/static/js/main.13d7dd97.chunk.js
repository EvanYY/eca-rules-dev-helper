(this["webpackJsonpeac-panel-ui"]=this["webpackJsonpeac-panel-ui"]||[]).push([[0],{130:function(e,t,n){},304:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(21),i=n.n(a),s=(n(130),n(131),n(51)),o=n.n(s),u=(n(133),n(81)),l=n.n(u),d=(n(135),n(118)),j=n.n(d),f=(n(137),n(47)),v=n.n(f),b=n(31),p=n(2),h=function(e){var t=Object(r.useState)(!0),n=Object(b.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)("\u5f00\u59cb\u5f55\u5236"),s=Object(b.a)(i,2),o=s[0],u=s[1],d=e.control,f=e.stateUI.menu;return Object(p.jsx)("div",{className:"content",children:Object(p.jsxs)(l.a,{children:[Object(p.jsx)(v.a,{onClick:function(){c?(a(!1),u("\u7ed3\u675f\u5f55\u5236"),d.start()):(a(!0),u("\u5f00\u59cb\u5f55\u5236"),d.stop())},children:o}),Object(p.jsx)(v.a,{disabled:true,children:"\u5bfc\u5165"}),Object(p.jsx)(v.a,{disabled:true,children:"\u5bfc\u51fa"}),0!==f.length&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(j.a,{content:function(){return f.map((function(e){return Object(p.jsxs)("div",{style:{padding:"6px 0"},children:[Object(p.jsx)("span",{children:"".concat(e.timeRange.start,"-").concat(e.timeRange.stop)}),Object(p.jsx)("span",{style:{marginLeft:"10px",cursor:"pointer"},onClick:function(){return d.removeMenu(e.id)},children:"close"})]},e.id)}))},title:"\u7ec4\u5217\u8868",children:Object(p.jsx)(v.a,{type:"primary",children:"\u5220\u9664\u83dc\u5355\u7ec4"})}),Object(p.jsx)(v.a,{type:"primary",danger:!0,onClick:function(){return d.removeMenu()},children:"\u6e05\u7a7a\u6240\u6709\u83dc\u5355\u7ec4"})]})]})})};function m(e){return Object(p.jsx)("div",{style:{gap:"8px"},className:"eca-space align-center",children:e.children})}var O=function(e){var t=e.cur,n=e.setcur,r=e.tabs;return Object(p.jsx)("div",{className:"eca-tabs-content",children:Object(p.jsx)(m,{children:r.map((function(e,r){return Object(p.jsx)("div",{className:"eca-tabs-item ".concat(t===e.types?"is-active-tab":""),onClick:function(){return n(e.types)},children:e.label},r)}))})})},g=function(e){var t=e.Left,n=e.Center,r=e.Right,c=e.className;return Object(p.jsxs)("div",{className:"eca-layout-room ".concat(c),children:[t&&Object(p.jsx)("div",{className:"eca-layout-left",children:t}),Object(p.jsxs)("div",{className:"eca-layout-content",children:[n&&Object(p.jsx)("div",{className:"eca-layout-center",children:n}),r&&Object(p.jsx)("div",{className:"eca-layout-right",children:r})]})]})},x=n(29),y=function(e){var t=e.store,n=e.active,r=e.label,c=e.time,a=e.className;return Object(p.jsxs)("div",{className:"eca-list-item ".concat(a||""),onClick:function(){(null===t||void 0===t?void 0:t.id)!==(null===n||void 0===n?void 0:n.id)&&e.setState(e.store||{})},children:[Object(p.jsx)("div",{children:r}),Object(p.jsx)("div",{children:c})]})},S=function(e){var t=e.options,n=e.active,r=e.isActiveClass,c=e.setState;return Object(p.jsx)("div",{className:"eca-list-group",children:t.length?t.map((function(e,t){return Object(p.jsx)(y,Object(x.a)(Object(x.a)({},e),{},{idx:t,store:e,active:n,className:"".concat((null===n||void 0===n?void 0:n.id)===(null===e||void 0===e?void 0:e.id)?r||"is-active":""),setState:c}),t)})):"\u6682\u65e0\u6570\u636e"})},w=n(120),C=n(121),M=function(e){return document.getElementById(e)},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;try{return JSON.stringify(e,null,t)}catch(n){return JSON.stringify({error:"".concat(e," failed praser to string")},null,t)}},E=function(e){var t=e;return"string"!==typeof e&&(t=JSON.stringify(e,void 0,2)),(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"pre-key":"pre-string":/true|false/.test(e)?t="pre-boolean":/null/.test(e)&&(t="pre-null"),'<span class="'+t+'">'+e+"</span>"}))};function k(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:13,t="abcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++){var c=Math.random()*t.length;n+=t[parseInt(c,10)]}return n}function I(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:MM:SS";try{t=new Date(e)}catch(s){throw new Error("dateFormat \u65e5\u671f\u521d\u59cb\u5316\u51fa\u9519")}var r,c=n,a={"y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r=new RegExp("("+i+")").exec(c))&&(c=c.replace(r[1],1===r[1].length?a[i]:a[i].padStart(r[1].length,"0")));return c}var _=function(){return(new Date).getTime()},L=function(){function e(){Object(w.a)(this,e),this.state={}}return Object(C.a)(e,[{key:"addEvent",value:function(e,t){e in this.state?this.state[e].some((function(e){return e===t}))||this.state[e].push(t):this.state[e]=[t]}},{key:"removeEvent",value:function(e,t){if(!(e in this.state))return console.error("".concat(e," is not in state"));var n=this.state[e].findIndex((function(e){return e===t}));-1!==n&&this.state[e].splice(n,1)}},{key:"dispatchEvent",value:function(e,t){e in this.state?this.state[e].forEach((function(e){return e(t)})):"".concat(e," is not in state")}}]),e}(),D=function(e){var t=e.json;return Object(p.jsx)("pre",{className:"pre-format",dangerouslySetInnerHTML:{__html:E(N(t))}})},F=function(e){var t=e.title,n=e.json;return Object(p.jsxs)("div",{className:"box-content",children:[t&&Object(p.jsx)("div",{children:t}),n&&Object(p.jsx)(D,{json:n})||Object(p.jsx)("div",{children:"\u6682\u65e0\u6570\u636e"})]})},U=function(e){var t=e.options,n=e.active,r=e.setState,c=n.store,a=c.variables,i=c.params;return Object(p.jsx)(g,{Left:S({options:t,setState:r,active:n,isActiveClass:"is-active-list"}),Center:F({title:"\u89c4\u5219\u5b9a\u4e49",json:i}),Right:F({title:"\u8868\u8fbe\u5f0f\u7684\u503c",json:a})})},R=n(68),A=function(e){var t,n=e.es,c=e.dictionary,a=Object(r.useState)({options:[],active:{}}),i=Object(b.a)(a,2),s=i[0],o=i[1],u="eca-panel-chart",l=function(){var e=R.a(M(u));e&&e.resize()};return Object(r.useEffect)((function(){var e,t,r=R.a(M(u));void 0===r&&((r=R.b(M(u))).on("click",(function(e){if(e.data.source){var t=function(e,t){return e.effect.map((function(e){var n=t[e.ruleDefId];return{id:e.ruleDefId,label:n.name,store:{variables:e.variables,params:n.params}}}))}(e.data,c),n=t.length;o({active:t[0]||{},options:n?t:[]})}})),r.resize(),r.setOption((e=n.nodes,t=n.links,{title:{text:"\u6c49\u8bed\u6587\u5b57 aaaa"},tooltip:{trigger:"item"},series:{type:"sankey",draggable:!1,data:e,links:t,dataZoom:{start:0,end:200},emphasis:{focus:"adjacency"},lineStyle:{color:"source",curveness:.5}}})))})),Object(r.useEffect)((function(){return window.addEventListener("resize",l),function(){window.removeEventListener("resize",l)}}),[]),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{id:u,style:{width:"100%",height:"300px"},children:"chart"}),Object(p.jsx)("div",{className:"line",style:{marginBottom:"5px"}}),!!(null===(t=s.options)||void 0===t?void 0:t.length)&&Object(p.jsx)(U,{options:s.options,active:s.active,setState:function(e){o({active:e,options:s.options})}})]})},T=n(123),z=n(50),H=n(82),J=["oldStr","newStr","context","theme"],P=function(e){var t=e.oldStr,n=void 0===t?"":t,c=e.newStr,a=void 0===c?"":c,i=e.context,s=e.theme,o=void 0===s?"auto":s,u=Object(T.a)(e,J),l=Object(r.useMemo)((function(){var e=["",n||"",a||"","","",{context:i}],t=z.createPatch.apply(void 0,e),r=Object(H.b)(t,Object(x.a)(Object(x.a)({},u),{},{drawFileList:!1,matching:"lines"}));return function(e){return e.replace(/<span class="d2h-code-line-ctn">(.+?)<\/span>/g,'<span class="d2h-code-line-ctn"><code>$1</code></span>')}(Object(H.a)(r,Object(x.a)(Object(x.a)({},u),{},{drawFileList:!1,matching:"lines"})))}),[n,a,i,u]);return Object(p.jsx)("div",{className:"react-code-diff-lite ".concat(o),dangerouslySetInnerHTML:{__html:l}})};P.defaultProps={oldStr:"",newStr:"",context:0,outputFormat:"line-by-line"};var B=P,V=function(e){var t=e.pre,n=e.next;return Object(p.jsx)("div",{className:"box-content diff-json-container",children:Object(p.jsx)(B,{oldStr:N(t),newStr:N(n),context:10,theme:"light",outputFormat:"side-by-side"})})},Z=(n(285),n(67)),$=n.n(Z),q=n(122),W=function(e){var t,n=e.control,r=e.stateUI,c=r.menu,a=r.curMenu,i=(t=[]).concat.apply(t,Object(q.a)(c.map((function(e){return e.store}))));return Object(p.jsx)($.a,{triggerSubMenuAction:"hover",theme:"light",onClick:function(e){var t=e.key;if(t===(null===a||void 0===a?void 0:a.id))return null;var r=i.find((function(e){return e.id===t}));r&&n.setCurMenu(r)},children:c.map((function(e){return Object(p.jsx)($.a.SubMenu,{title:"".concat(e.timeRange.start,"-").concat(e.timeRange.stop),children:(t=e.store,t.map((function(e){return Object(p.jsxs)($.a.Item,{children:[Object(p.jsx)("span",{children:e.label}),"(",Object(p.jsx)("span",{children:e.time}),")"]},e.id)})))},e.id);var t}))})},Y="noticePanel",G=function(){return window.chrome&&!!window.chrome.devtools},K=new L;window.contentScriptReceiver=function(e){e.source&&"__EAC_DEV_TODOS__"===e.source&&K.dispatchEvent(Y,e.data)};var Q=function(e){var t;G()&&(t="action(".concat(e,")"),G()&&window.chrome.devtools.inspectedWindow.eval("".concat("window.__EAC_DEV_TOOLS__",".").concat(t)))},X=function(e){var t=e.setMenu,n=e.menu,c={start:-1,stop:-1},a=function(t,n){var r=function(e,t){return e.length?{id:k(),timeRange:{start:I(t.start),stop:I(t.stop)},store:e.map((function(e){return{id:(t=e).batchId,label:t.trigger.title,time:t.trigger.time,store:{rules:{nodes:t.fields.map((function(e){return{name:e.field,store:null===e||void 0===e?void 0:e.detail}})),links:t.rules.map((function(e){return{source:e.dependent,target:e.target,value:e.weight,effect:e.effect}}))},effect:{pre:t.state.oldValue,next:t.state.newValue},dictionary:t.ruleDefs}};var t}))}:null}(t,n);r?(e.setCur(e.defCur),e.setMenu(e.menu.concat(r))):console.error("\u6a21\u677f\u89e3\u6790\u9519\u8bef ".concat(r))},i=function(e,t){a(function(e){try{return JSON.parse(e)}catch(t){return[]}}(e),Object(x.a)(Object(x.a)({},c),t))};return Object(r.useEffect)((function(){return K.addEvent(Y,i),function(){K.removeEvent(Y,i)}})),{receiveUpdateSource:a,setCurMenu:function(t){e.setCurMenu(t),e.setCur(e.defCur)},start:function(){c.start=_(),Q(!0)},stop:function(){c.stop=_(),Q(!1)},upload:function(){return"upload"},downLoad:function(){return"downLoad"},removeMenu:function(e){t("string"===typeof e?n.filter((function(t){return t.id!==e})):[])}}},ee=o.a.Sider,te=o.a.Content;var ne=function(e){var t=e.hideChromeUtils,n=function(){var e="rules",t=Object(r.useState)(e),n=Object(b.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)([]),s=Object(b.a)(i,2),o=s[0],u=s[1],l=Object(r.useState)(null),d=Object(b.a)(l,2),j=d[0],f=d[1],v=Object(r.useState)(!1),p=Object(b.a)(v,2);return{defCur:e,tabsUIData:[{label:"\u89c4\u5219\u6267\u884c",types:"rules"},{label:"\u6570\u636e\u5f71\u54cd",types:"effect"}],cur:c,setCur:a,menu:o,setMenu:u,loading:p[0],setLoading:p[1],curMenu:j,setCurMenu:f}}(),c=X(n),a=Object(r.useMemo)((function(){return function(e){var t=e.stateUI;if(t.curMenu){var n=t.curMenu.store,r=n.rules,c=n.effect,a=n.dictionary,i=function(){return"rules"===t.cur||"cycle"===t.cur?Object(p.jsx)(A,{es:r,dictionary:a}):"effect"===t.cur?Object(p.jsx)(V,{pre:c.pre,next:c.next}):null};return Object(p.jsxs)("div",{style:{background:"#fff"},children:[Object(p.jsx)(O,{cur:t.cur,setcur:t.setCur,tabs:t.tabsUIData}),Object(p.jsx)(i,{})]})}return null}({stateUI:n,control:c})}),[n,c]);return Object(p.jsxs)(o.a,{className:"App",children:[!t&&Object(p.jsx)(h,{control:c,stateUI:n}),Object(p.jsxs)(o.a,{style:{height:"calc(100% - 40px)"},children:[n.menu&&n.menu.length>0&&Object(p.jsx)(ee,{theme:"light",trigger:null,children:W({stateUI:n,control:c})})||"\u6682\u65e0\u6570\u636e",n.menu&&n.menu.length>0&&Object(p.jsx)(te,{style:{padding:"10px"},children:a})]})]})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,313)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(ne,{})}),document.getElementById("root")),re()}},[[304,1,2]]]);