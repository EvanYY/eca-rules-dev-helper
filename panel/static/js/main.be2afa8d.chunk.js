(this["webpackJsonpeac-panel-ui"]=this["webpackJsonpeac-panel-ui"]||[]).push([[0],{125:function(e,t,n){},299:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(22),a=n.n(i),s=(n(125),n(126),n(63)),o=n.n(s),u=(n(128),n(74)),l=n.n(u),d=(n(77),n(35)),f=n.n(d),v=n(12),j=n(2),b=function(e){var t=Object(c.useState)(!0),n=Object(v.a)(t,2),r=n[0],i=n[1],a=Object(c.useState)("\u5f00\u59cb\u5f55\u5236"),s=Object(v.a)(a,2),o=s[0],u=s[1],d=e.control,b=e.stateUI,h=b.menu,O=b.loading,p="small";return Object(j.jsx)("div",{className:"content",children:Object(j.jsxs)(l.a,{children:[Object(j.jsx)(f.a,{onClick:function(){r?(i(!1),u("\u7ed3\u675f\u5f55\u5236"),d.start()):(i(!0),u("\u5f00\u59cb\u5f55\u5236"),d.stop())},disabled:O,size:p,children:b.loading?"\u6b63\u5728\u89e3\u6790\u6a21\u677f":o}),Object(j.jsx)(f.a,{disabled:true,size:p,children:"\u5bfc\u5165"}),Object(j.jsx)(f.a,{disabled:true,size:p,children:"\u5bfc\u51fa"}),0!==h.length&&Object(j.jsx)(f.a,{type:"primary",danger:!0,onClick:function(){return d.removeMenu()},size:p,children:"\u6e05\u7a7a\u5f55\u5236\u7ed3\u679c"})]})})},h=n(16),O=(n(203),n(75)),p=n.n(O),m=n(112),g=n(113);function x(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var y=/\s/;var w=/^\s+/;function S(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&y.test(e.charAt(t)););return t}(e)+1).replace(w,""):e}var E=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,N=/^0o[0-7]+$/i,C=parseInt;function M(e){if("number"===typeof e)return e;if(x(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=x(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=S(e);var n=k.test(e);return n||N.test(e)?C(e.slice(2),n?2:8):E.test(e)?NaN:+e}var D="Expected a function",I=Math.max,L=Math.min,T=function(){return Date.now()};function _(e,t){var n,c,r,i,a,s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(D);function v(t){var r=n,a=c;return n=c=void 0,u=t,i=e.apply(a,r)}function j(e){return u=e,a=setTimeout(O,t),l?v(e):i}function b(e){var n=t-(e-s);return d?L(n,r-(e-u)):n}function h(e){var n=e-s;return void 0===s||n>=t||n<0||d&&e-u>=r}function O(){var e=T();if(h(e))return p(e);a=setTimeout(O,b(e))}function p(e){return a=void 0,f&&n?v(e):(n=c=void 0,i)}function m(){void 0!==a&&clearTimeout(a),u=0,n=s=c=a=void 0}function g(){return void 0===a?i:p(T())}function y(){var e=T(),r=h(e);if(n=arguments,c=this,s=e,r){if(void 0===a)return j(s);if(d)return clearTimeout(a),a=setTimeout(O,t),v(s)}return void 0===a&&(a=setTimeout(O,t)),i}return t=M(t)||0,x(o)&&(l=!!o.leading,r=(d="maxWait"in o)?I(M(o.maxWait)||0,t):r,f="trailing"in o?!!o.trailing:f),y.cancel=m,y.flush=g,y}var R=function(e,t){if(""===t||t===e)return!0;e=e.toLocaleLowerCase(),t=t.toLocaleLowerCase();for(var n=0,c=0,r=-1,i=-1;n<e.length;)if(c<t.length&&(e[n]===t[c]||"?"===t[c]))n++,c++;else if(c<t.length&&"*"===t[c])r=n,i=c++;else{if(!(i>-1))return!1;n=++r,c=i+1}for(;c<t.length;)if("*"!==t[c++])return!1;return!0},z=function(e){return{id:P(),label:e.trigger.title,time:q(e.trigger.time,"HH\u65f6MM\u5206SS\u79d2MS\u6beb\u79d2"),store:{rules:{nodes:e.fields.map((function(e){return{name:e.field,store:e.detail}})),links:e.rules.map((function(e){return{source:e.dependent,target:e.target,value:e.weight,effect:e.effect}}))},effect:{pre:e.valueDiffer.oldValue,next:e.valueDiffer.newValue}}}},F=function(e,t,n){return e.length?{id:P(),timeRange:{start:q(t.start),stop:q(t.stop)},store:e.map((function(e){return z(e)})),status:n||"resolve"}:null},A=function(e){try{return JSON.parse(e)}catch(t){return[]}},U=function(e){return document.getElementById(e)},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;try{return JSON.stringify(e,null,t)}catch(n){return JSON.stringify({error:"".concat(e," failed praser to string")},null,t)}};function P(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:13,t="abcdefghijklmnopqrstuvwxyz0123456789",n="",c=0;c<e;c++){var r=Math.random()*t.length;n+=t[parseInt(r,10)]}return n}function q(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:MM:SS";try{t=new Date(e)}catch(s){throw new Error("dateFormat \u65e5\u671f\u521d\u59cb\u5316\u51fa\u9519")}var c,r=n,i={"y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString(),"MS+":t.getMilliseconds().toString()};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(c=new RegExp("("+a+")").exec(r))&&(r=r.replace(c[1],1===c[1].length?i[a]:i[a].padStart(c[1].length,"0")));return r}var H=function(){return(new Date).getTime()},J=function(){function e(){Object(m.a)(this,e),this.state={}}return Object(g.a)(e,[{key:"addEvent",value:function(e,t){e in this.state?this.state[e].some((function(e){return e===t}))||this.state[e].push(t):this.state[e]=[t]}},{key:"removeEvent",value:function(e,t){if(!(e in this.state))return console.error("".concat(e," is not in state"));var n=this.state[e].findIndex((function(e){return e===t}));-1!==n&&(this.state[e].splice(n,1),0===this.state[e].length&&delete this.state[e])}},{key:"dispatchEvent",value:function(e,t,n){e in this.state?this.state[e].forEach((function(e){return e(t,n)})):"".concat(e," is not in state")}}]),e}(),W=function(e,t,n){return"".concat(e,"__").concat(t,"__").concat(n)},Y=new J,$="searchLink",B="viewResize";function X(e){return Object(j.jsx)("div",{style:{gap:e.size||"8px"},className:"eca-space align-center ".concat(e.className||""),children:e.children})}var K=p.a.Option,G=function(e){var t,n,r=e.stateUI,i=r.curMenu,a=r.dictionary,s=(i?i.store:{rules:{nodes:[],links:[]}}).rules,o=function(e){var t=Object(c.useState)("-1"),n=Object(v.a)(t,2),r=n[0],i=n[1],a={};return Object.values(e).map((function(e){return e.actionName})).forEach((function(e){a[e]=e})),{value:r,setValue:i,dictionaryList:[{value:"-1",label:"\u5168\u90e8"}].concat(Object.keys(a).map((function(e){return{value:e,label:e}})))}}(a),u=function(e){var t=e.map((function(e,t){var n={"-1":null};return e.effect.forEach((function(e){n[e.actionName]=null})),{indexes:n,store:e,source:e.source,target:e.target,label:"".concat(e.source," - ").concat(e.target),id:"".concat(t)}})),n=Object(c.useState)(null),r=Object(v.a)(n,2),i=r[0],a=r[1],s=Object(c.useState)(!1),o=Object(v.a)(s,2),u=o[0],l=o[1],d=Object(c.useState)(t),f=Object(v.a)(d,2);return{value:i,setValue:a,options:f[0],setOptions:f[1],cacheLinks:t,open:u,setOpen:l}}(s.links),l=u.options,d=u.cacheLinks,b=function(e,t){var n=d.find((function(t){return t.id===e}));if(u.setValue(n||null),n){var c={},r=d.filter((function(e){return null===e.indexes[t||o.value]&&R(e.target,m.current.value)}));r.forEach((function(e){c[e.target]=null})),Y.dispatchEvent($,n.store,r.length?c:null)}else console.dir("\u641c\u7d22\u540e\u7684node \u5e76\u4e0d\u5b58\u5728")};Object(c.useEffect)((function(){m.current.value="",o.setValue("-1"),u.setValue(null),u.setOptions(d.filter((function(e){return null===e.indexes[o.value]})))}),[i]),Object(c.useEffect)((function(){var e=function(e){e||(o.setValue("-1"),u.setValue(null))};return Y.addEvent($,e),function(){Y.removeEvent($,e)}}),[u,o]);var h=_((function(e){var t=d.filter((function(t){return null===t.indexes[o.value]&&R(t.target,e)}));u.setOptions(t),t.length>0&&e&&b(t[0].id)}),500),O=function(e){var t=u.options.map((function(e){return e.id}));if(t.length){var n="";if(null===u.value)n=t[e?t.length-1:0];else{var c=t.findIndex((function(e){var t;return e===(null===(t=u.value)||void 0===t?void 0:t.id)}));if(-1===c)n=t[e?t.length-1:0];else{var r=e?--c:++c;n=e?r<0?t[t.length-1]:t[r]:r>t.length-1?t[0]:t[r]}}b(n)}},m=Object(c.useRef)(null);return Object(j.jsxs)("div",{className:"search-bar",children:[Object(j.jsxs)(X,{children:[Object(j.jsx)(p.a,{style:{width:300},value:o.value,onChange:function(e){o.setValue(e);var t=d.filter((function(t){return null===t.indexes[e]&&R(t.target,m.current.value)}));u.setOptions(t),t.length>0&&b(t[0].id,e)},children:o.dictionaryList.map((function(e){return Object(j.jsx)(K,{value:e.value,children:e.label},e.value)}))}),Object(j.jsxs)(X,{size:12,children:[Object(j.jsx)("input",{ref:m,placeholder:"\u901a\u914d\u7b26\u641c\u7d22\u8fb9\u7684\u672b\u5c3e\u8282\u70b9",onChange:function(e){h(e.target.value)},onKeyDown:function(e){"ArrowUp"!==e.code&&"ArrowDown"!==e.code||(e.preventDefault(),e.stopPropagation(),O("ArrowUp"===e.code))},style:{width:270}}),Object(j.jsxs)("span",{children:[l.findIndex((function(e){var t;return e.id===(null===(t=u.value)||void 0===t?void 0:t.id)}))+1,"/",l.length]}),Object(j.jsx)(f.a,{disabled:0===l.length,onClick:function(){return O(!0)},children:"\u2191"}),Object(j.jsx)(f.a,{disabled:0===l.length,onClick:function(){return O(!1)},children:"\u2193"}),Object(j.jsx)("span",{style:{color:"#bbb"},children:"\u5feb\u6377\u952eup down"})]})]}),Object(j.jsx)("div",{style:{padding:"10px 0 0 4px"},children:Object(j.jsxs)(X,{children:[Object(j.jsxs)("div",{style:{lineHeight:"20px"},children:[Object(j.jsx)("span",{children:"\u8d77\u59cb\u8282\u70b9:"}),u.value&&Object(j.jsx)("span",{className:"eca-search-link-node",children:null===(t=u.value)||void 0===t?void 0:t.source})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"\u76ee\u6807\u8282\u70b9:"}),u.value&&Object(j.jsx)("span",{className:"eca-search-link-node",children:null===(n=u.value)||void 0===n?void 0:n.target})]})]})})]})},Q=n(118),Z=n(46),ee=n(76),te=["oldStr","newStr","context","theme"],ne=function(e){var t=e.oldStr,n=void 0===t?"":t,r=e.newStr,i=void 0===r?"":r,a=e.context,s=e.theme,o=void 0===s?"auto":s,u=Object(Q.a)(e,te),l=Object(c.useMemo)((function(){var e=["",n||"",i||"","","",{context:a}],t=Z.createPatch.apply(void 0,e),c=Object(ee.b)(t,Object(h.a)(Object(h.a)({},u),{},{drawFileList:!1,matching:"lines"}));return function(e){return e.replace(/<span class="d2h-code-line-ctn">(.+?)<\/span>/g,'<span class="d2h-code-line-ctn"><code>$1</code></span>')}(Object(ee.a)(c,Object(h.a)(Object(h.a)({},u),{},{drawFileList:!1,matching:"lines"})))}),[n,i,a,u]);return Object(j.jsx)("div",{className:"react-code-diff-lite ".concat(o),dangerouslySetInnerHTML:{__html:l}})};ne.defaultProps={oldStr:"",newStr:"",context:0,outputFormat:"line-by-line"};var ce=ne,re=function(e){var t=e.pre,n=e.next,r=Object(c.useState)({Com:null}),i=Object(v.a)(r,2),a=i[0],s=i[1],o=Object(c.useRef)();return Object(c.useEffect)((function(){return o.current=setTimeout((function(){s({Com:Object(j.jsx)(ce,{oldStr:V(t),newStr:V(n),context:15e4,theme:"light",outputFormat:"side-by-side"})})}),200),function(){o.current&&clearTimeout(o.current)}}),[n,t]),Object(j.jsxs)("div",{className:"box-content diff-json-container",children:[!a.Com&&Object(j.jsx)("div",{children:"\u6b63\u5728\u6bd4\u5bf9\u6a21\u677f..."}),a.Com]})},ie=function(e){var t=e.cur,n=e.setcur,c=e.tabs;return Object(j.jsx)("div",{className:"eca-tabs-content",children:Object(j.jsxs)(X,{children:[e.prefix,c.map((function(e,c){return Object(j.jsx)("div",{className:"eca-tabs-item ".concat(t===e.types?"is-active-tab":""),onClick:function(){return n(e.types)},children:e.label},c)})),e.children]})})},ae=function(e){var t=e.options,n=e.active,c=e.isActiveClass,r=e.setState;return Object(j.jsx)("div",{className:"eca-list-group",children:t.length?t.map((function(t,i){return Object(j.jsxs)("div",{className:"eca-list-item ".concat((null===n||void 0===n?void 0:n.id)===(null===t||void 0===t?void 0:t.id)?c||"is-active":""),onClick:function(){return function(e,t){e!==(null===n||void 0===n?void 0:n.id)&&r(t||{})}(t.id,t)},children:[Object(j.jsx)("div",{title:t.label,children:t.label}),Object(j.jsx)("div",{children:e.extend&&(null===e||void 0===e?void 0:e.extend(t))})]},i)})):"\u6682\u65e0\u6570\u636e"})},se=n(115),oe=n.n(se),ue=function(e){return Object(j.jsx)("div",{className:"pre-format",children:Object(j.jsx)(oe.a,{src:e.json,displayObjectSize:!1,displayDataTypes:!1,enableClipboard:!1,collapsed:1})})},le=function(e){var t=e.options,n=e.active,c=e.setState,r=n.store,i=r.variables,a=r.params;return Object(j.jsxs)("div",{className:"list-json",children:[Object(j.jsx)("div",{className:"list-json-menu",children:ae({options:t,setState:c,active:n,isActiveClass:"is-active-list",extend:function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{children:["\u8fdb\u7a0b: ",e.store.sequence]})})}})}),Object(j.jsxs)("div",{className:"list-json-container",children:[Object(j.jsxs)("div",{className:"echo-json clear-mr",children:[Object(j.jsx)("div",{className:"echo-json-title",children:"\u89c4\u5219\u5b9a\u4e49"}),Object(j.jsx)(ue,{json:a})]}),Object(j.jsxs)("div",{className:"echo-json",children:[Object(j.jsx)("div",{className:"echo-json-title",children:"\u8868\u8fbe\u5f0f\u7684\u503c"}),Object(j.jsx)(ue,{json:i})]})]})]})},de=n(117),fe=function(e,t){var n=t?e+.1:e-.1;return n<0?n=0:n>10&&(n=10),n},ve=function(e,t,n){var c=fe(e!==t?Math.max(e,t):e,n);return{h:c,w:c}},je=n.p+"static/media/move.00692c67.svg";function be(e){var t=e.redraw,n=e.mode,r=void 0===n?"vertical":n,i=Object(c.useRef)(null),a=function(e){t&&t(e)};return Object(j.jsx)("div",{className:"draggleLine-wrapper",style:e.style,onDragStart:function(e){return function(e){e.stopPropagation();var t=e.clientX,n=e.clientY;i.current={x:t,y:n}}(e)},onDragEnd:function(e){return(t=e).stopPropagation(),t.clientY,i.current,void("vertical"===r?a(t.clientY-i.current.y):"horizontal"===r&&a(t.clientX-i.current.x));var t},draggable:"true",children:Object(j.jsx)("img",{src:je,width:"20",alt:"\u62d6\u62fd",draggable:"false"})})}var he,Oe,pe=n(47),me=n(116),ge="eca-panel-chart",xe=function(e){var t,n=e.stateUI.curMenu,r=e.stateUI.dictionary,i=n.store.rules,a=Object(c.useState)(""),s=Object(v.a)(a,2),o=s[0],u=s[1],l=Object(c.useState)({options:[],active:{}}),d=Object(v.a)(l,2),f=d[0],b=d[1],O=function(){var e=Object(c.useState)({w:0,h:0}),t=Object(v.a)(e,2),n=t[0],r=t[1],i=Object(c.useRef)(_((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r((function(n){var c={h:n.h,w:n.w};switch(e){case"h":case"w":c[e]=fe(c[e],t);break;case"equal":c=ve(c.h,c.w,t);break;case"clear":c.w=0,c.h=0}return c}))}),50)).current,a=function(){return document.body.offsetHeight-200},s=300,o=Object(c.useState)(a()),u=Object(v.a)(o,2),l=u[0],d=u[1],f=Object(c.useState)(s),j=Object(v.a)(f,2),b=j[0],h=j[1];Object(c.useEffect)((function(){var e=function(){var e=a();d(e),b>e&&h(e)};return Y.addEvent(B,e),function(){Y.removeEvent(B,e)}}),[b]);var O=Object(c.useState)(!0),p=Object(v.a)(O,2),m=p[0],g=p[1],x=_((function(){var e=!m;g(e),h(e?s:a())}),200);return{scal:n,defTarget:s,target:b,astringe:m,chartScal:i,redraw:function(e){h((function(t){var n=t+e;return n<s?s:n>l?l:n}))},setTarget:h,setAstringe:g,handleScroll:function(e){e.stopPropagation(),0===e.nativeEvent.deltaY||e.nativeEvent.deltaX||i("equal",e.nativeEvent.deltaY<0)},dectorSetAstringe:x}}(),p=O.scal,m=O.chartScal,g=O.redraw,x=O.target,y=O.setTarget,w=O.defTarget,S=O.astringe,E=O.dectorSetAstringe,k=O.setAstringe,N=O.handleScroll,C=Object(c.useCallback)((function(e){var t=function(e,t){return e.effect.map((function(e){var n=W(e.ruleId,e.actionIndex,e.actionName),c=t[n];return{id:n,label:e.actionName,store:{variables:e.variables,params:c||{},sequence:e.sequence}}}))}(e,r),n=t.length;b({active:t[0]||{},options:n?t:[]})}),[r]),M=Object(c.useCallback)((function(e,t){var n=pe.a(U(ge));try{n&&(e||n.clear(),n.off("click"),n.on("click",(function(e){if(e.data.source){var t=e.data;Y.dispatchEvent($,null),C(t),M(t)}})),n.setOption(function(e){var t=e.nodes,n=e.links,c=e.searchLink,r=e.nodesMap,i=t.map((function(e){return e})).sort((function(e,t){return e.name.localeCompare(t.name)})),a=Math.max.apply(Math,Object(de.a)(i.map((function(e){return e.name.length})))),s={tooltip:{trigger:"item"},series:{type:"sankey",layoutIterations:0,right:Math.round(6.2*a)+4+"px",left:"10",top:"10",nodeAlign:"left",bottom:"10",emphasis:{focus:"adjacency"},draggable:!1,data:i,links:n,lineStyle:{color:"gradient",curveness:.5}}};if(c){s.series.emphasis={focus:"none"};var o={lineStyle:{opacity:1}};if(r){var u={label:{color:"red"}};s.series.data=i.map((function(e){return null===r[e.name]?Object(h.a)(Object(h.a)({},e),u):e}))}s.series.links=n.map((function(e){return e.source===c.source&&e.target===c.target?Object(h.a)(Object(h.a)({},e),o):e})),s.series.lineStyle.opacity=.1}return s}({nodes:i.nodes,links:i.links,searchLink:e||null,nodesMap:t||null})))}catch(c){u("\u6851\u57fa\u56fe\u7ed8\u5236\u5931\u8d25 \u53ef\u80fd\u5b58\u5728\u73af")}}),[C,i.links,i.nodes]);Object(c.useEffect)((function(){y(w),k(!0),M(),b({options:[],active:{}}),m("clear")}),[m,M,n,w,k,y]),Object(c.useEffect)((function(){var e=pe.a(U(ge));void 0===e&&((e=pe.b(U(ge))).on("click",(function(e){if(e.data.source){var t=e.data;Y.dispatchEvent($,null),C(t),M(t)}})),M())}),[M,C]),Object(c.useEffect)((function(){return Y.addEvent(B,D),function(){Y.removeEvent(B,D)}}),[]),Object(c.useEffect)((function(){var e=function(e,t){e&&(C(e),M(e,t))};return Y.addEvent($,e),function(){Y.removeEvent($,e)}}),[M,C]),Object(c.useEffect)((function(){setTimeout((function(){D()}),300)}),[p,x]);var D=function(){var e=pe.a(U(ge));e&&e.resize()};return Object(j.jsxs)(j.Fragment,{children:[!o&&Object(j.jsxs)("div",{className:"eca-canvas",style:{width:"calc(100vw - 200px)",minWidth:760,height:x},onWheel:function(e){return N(e)},children:[Object(j.jsxs)(X,{className:"utils-base utils-width",children:[Object(j.jsx)("div",{className:"utils-btn eca-canvas-up",onClick:function(){return m("equal",!0)},children:"+"}),Object(j.jsx)("div",{className:"",children:(100*(1+p.w)).toFixed(0)+"%"}),Object(j.jsx)("div",{className:"utils-btn eca-canvas-down ".concat(0===p.w?"eca-forbidden":""),onClick:function(){return m("equal",!1)},children:"-"}),Object(j.jsxs)("div",{className:"utils-btn eca-canvas-up",onClick:function(){return E()},children:[S?"\u5c55\u5f00":"\u6536\u8d77","\u56fe\u8868"]}),Object(j.jsx)("div",{className:"utils-btn eca-canvas-all",onClick:function(){return m("clear")},children:"\u6062\u590d\u5c3a\u5bf8"}),Object(j.jsx)("div",{children:"[\u6eda\u8f6e\u6eda\u52a8\u653e\u5927\u3001\u7f29\u5c0f,\u62d6\u62fd\u89c6\u53e3\u79fb\u52a8]"})]}),Object(j.jsx)("div",{className:"eca-canvas-chart",children:Object(j.jsx)(me.a,{className:"scroll-container",style:{height:"100%",width:"100%"},children:Object(j.jsx)("div",{id:ge,style:{width:"".concat(100*(1+p.w),"%"),height:"".concat(100*(1+p.h),"%")}})})}),Object(j.jsx)(be,{style:{position:"absolute",bottom:2,left:0},redraw:g})]}),o&&Object(j.jsxs)("div",{style:{color:"red"},children:[" ",o," "]}),Object(j.jsx)("div",{style:{height:"calc(100% - ".concat(x+112,"px)")},children:!!(null===(t=f.options)||void 0===t?void 0:t.length)&&Object(j.jsx)(le,{options:f.options,active:f.active,setState:function(e){b({active:e,options:f.options})}})})]})},ye=function(e){var t=e.stateUI,n=Object(c.useState)({activeDiff:!1,cur:t.defCur}),r=Object(v.a)(n,2),i=r[0],a=r[1],s=t.curMenu?t.curMenu.store.effect:null;return Object(c.useEffect)((function(){a({activeDiff:!1,cur:t.defCur})}),[t.curMenu,t.defCur]),Object(j.jsx)(j.Fragment,{children:t.curMenu&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ie,{cur:i.cur,setcur:function(e){a((function(t){return{activeDiff:t.activeDiff||"effect"===e,cur:e}}))},tabs:t.tabsUIData}),Object(j.jsxs)("div",{style:{height:"calc(100% - 45px)",display:"rules"===i.cur?"block":"none"},children:[Object(j.jsx)("div",{children:Object(j.jsx)(G,Object(h.a)({},e))}),Object(j.jsx)(xe,Object(h.a)({},e))]}),i.activeDiff&&s&&Object(j.jsx)("div",{style:{background:"#fff",display:"effect"===i.cur?"block":"none"},children:Object(j.jsx)(re,{pre:s.pre,next:s.next})}),!s&&Object(j.jsx)("span",{style:{color:"red"},children:"\u7f3a\u5c11\u5f71\u54cd\u5b57\u6bb5"})]})})},we=n.p+"static/media/delete.a762156b.svg",Se=function(e){var t=Object(c.useRef)({root:null,level1:null}),n=e.control,r=e.stateUI,i=r.menu,a=r.curMenu,s=function(e,c){return e.map((function(e){return Object(j.jsx)("div",{title:"".concat(e.label,"(").concat(e.time,")"),onClick:function(){return function(e,c){var r=e.id;if(r===(null===a||void 0===a?void 0:a.id))return null;t.current.root=c,t.current.level1=r,n.setCur(e)}(e,c)},className:"eca-menu-item ".concat(e.id===t.current.level1?"is-acitve-menu":""),children:Object(j.jsx)("div",{title:"".concat(e.time,"\n").concat(e.label),className:"eca-menu-item-text",children:e.label})},e.id)}))};return Object(j.jsx)("div",{style:{overflow:"auto",height:"100%",width:"100%"},children:(i||[]).map((function(e,c){return Object(j.jsxs)("div",{className:"eca-menu",children:[Object(j.jsxs)("div",{className:"eca-menu-sub ".concat(e.id===t.current.root?"is-acitve-menu":""),title:"".concat(e.timeRange.start,"-").concat(e.timeRange.stop),children:[Object(j.jsxs)("span",{children:["\u7b2c",c+1,"\u6761"]}),Object(j.jsx)("span",{className:"eca-menu-icon",onClick:function(){return n.removeMenu(e.id)},children:Object(j.jsx)("img",{src:we,alt:"",width:"14"})})]}),Object(j.jsx)("div",{children:s(e.store,e.id)})]},e.id)}))})},Ee=function(e){var t=Object(c.useState)(0),n=Object(v.a)(t,2),r=n[0],i=n[1],a=e.setLoading,s=Object(c.useRef)();return Object(c.useEffect)((function(){return s.current=setInterval((function(){i((function(e){var t=++e;return t>=30&&"function"===typeof a&&a(!1),t}))}),1e3),function(){s.current&&(clearTimeout(s.current),i(0))}}),[a]),Object(j.jsx)("div",{className:"mask",children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:[e.children,r,"s"]}),Object(j.jsx)("div",{style:{color:"#ececec",fontSize:"14px"},children:"Tips:\u6700\u591a\u7b49\u5f8530s\uff0c\u82e5\u8d85\u65f6\u672a\u54cd\u5e94\u5219\u662f\u6d88\u606f\u5e76\u672a\u53d1\u9001\uff0c\u53ef\u5c1d\u8bd5\u5173\u95ed\u63a7\u5236\u53f0\u540e\u5237\u65b0\u9875\u9762\u91cd\u65b0\u64cd\u4f5c"})]})})},ke="noticePanel",Ne=function(){return window.chrome&&!!window.chrome.devtools},Ce=new J,Me=function(e,t){var n,c=t||"emit";Ne()&&(n="action(".concat(e,',"').concat(c,'")'),Ne()&&window.chrome.devtools.inspectedWindow.eval("".concat("window.__EAC_DEV_TOOLS__",".").concat(n)))};window.contentScriptReceiver=function(e){e.source&&"__EAC_DEV_TODOS__"===e.source&&Ce.dispatchEvent(ke,e)},function(e){e.emit="emit",e.abort="abort",e.pending="emitPendding",e.dic="emitRuleDictionary",e.res="emitResolve"}(he||(he={})),function(e){e.pending="pending",e.resolve="resolve"}(Oe||(Oe={}));var De={start:-1,stop:-1},Ie=o.a.Content;var Le=function(){var e=function(){var e=Object(c.useState)([]),t=Object(v.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(null),a=Object(v.a)(i,2),s=a[0],o=a[1],u=Object(c.useState)(!1),l=Object(v.a)(u,2),d=l[0],f=l[1],j=Object(c.useState)({}),b=Object(v.a)(j,2),h=b[0],O=b[1],p=Object(c.useState)(!1),m=Object(v.a)(p,2);return{defCur:"rules",tabsUIData:[{label:"\u89c4\u5219\u6267\u884c",types:"rules"},{label:"\u6570\u636e\u5f71\u54cd",types:"effect"}],collapsed:m[0],setCollapsed:m[1],menu:n,setMenu:r,loading:d,setLoading:f,curMenu:s,setCurMenu:o,dictionary:h,setDictionary:O}}(),t=function(e){var t=e.setMenu,n=e.setLoading,r=e.setCurMenu,i=e.setDictionary,a=Object(c.useCallback)((function(e,c){var r=F(e,c);r?t((function(e){return e.concat(r)})):console.dir("\u6a21\u677f\u89e3\u6790\u9519\u8bef ".concat(r)),n(!1)}),[n,t]);return Object(c.useEffect)((function(){var e=function(e,c){var r=e.data,s=e.action;if(s===he.emit)a(A(r),Object(h.a)(Object(h.a)({},De),c));else if(s===he.dic)i((function(e){var t="string"===typeof r?JSON.parse(r):r,n={};return t.forEach((function(e){n[W(e.ruleId,e.actionIndex,e.actionName)]=e})),Object(h.a)(Object(h.a)({},e),n)}));else if(s===he.pending||s===he.res){var o=A(r);t((function(e){var t=e;if(!o.length)return t;var n=t.findIndex((function(e){return e.status===Oe.pending})),r=s===he.res?Oe.resolve:Oe.pending;if(-1!==n){var i=o.map((function(e){return z(e)}));return t.map((function(e,t){return t===n?Object(h.a)(Object(h.a)({},e),{},{status:r,store:e.store.concat(i)}):e}))}var a=F(o,Object(h.a)(Object(h.a)({},De),c),r);return a?t.concat(a):t})),s===he.res&&n(!1)}};return Ce.addEvent(ke,e),function(){Ce.removeEvent(ke,e)}}),[a,i,n,t]),Object(c.useEffect)((function(){var e=_((function(){Y.dispatchEvent(B)}),500);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),{abortRequest:function(){Me(!0,"abort")},receiveUpdateSource:a,setCur:function(e){r(e)},start:function(){De.start=H(),Me(!0)},stop:function(){De.stop=H(),Me(!1),n(!0)},upload:function(){return"upload"},downLoad:function(){return"downLoad"},removeMenu:function(e){"string"===typeof e?t((function(t){var n=t.filter((function(t){return t.id!==e}));return 0===n.length&&r(null),n})):(t([]),r(null)),n(!1)}}}(e),n=Object(c.useMemo)((function(){return Object(j.jsx)(ye,{control:t,stateUI:e})}),[e.curMenu]);return Object(j.jsxs)(o.a,{className:"App",children:[Object(j.jsx)(b,{control:t,stateUI:e}),Object(j.jsxs)(o.a,{style:{display:"flex",flexDirection:"row",height:"calc(100vh - 45px)"},className:e.loading?"mask-root":"",children:[Object(j.jsx)("div",{style:{display:e.menu&&e.menu.length>0?"inline-block":"none",width:200,minWidth:200,height:"100%",backgroundColor:"#ffffff",borderRight:"1px solid #dddddd",padding:"4px 0 20px 0"},children:Se({stateUI:e,control:t})}),e.menu&&e.menu.length>0&&Object(j.jsx)(Ie,{style:{display:"flex",flexDirection:"column"},children:n}),e.loading&&Object(j.jsx)(Ee,{setLoading:e.setLoading,children:"\u6b63\u5728\u63a5\u6536\u6a21\u677f\u6570\u636e"}),0===e.menu.length&&Object(j.jsx)("h1",{style:{fontSize:"20px",padding:"10px 18px"},children:"\u8bf7\u5f55\u5236\u6570\u636e..."})]})]})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,307)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(Le,{})}),document.getElementById("root")),Te()}},[[299,1,2]]]);